<div class="ams-app" *ngIf="!isLoggedIn; else dashboardView">
  <div class="login-card">
    <h1>Asset Management System</h1>
    <p class="subtitle">Login first and then open the demo project dashboard.</p>

    <form (ngSubmit)="onLogin()" class="login-form">
      <label for="username">Username</label>
      <input id="username" type="text" name="username" [(ngModel)]="loginForm.username" placeholder="Enter username" required>

      <label for="password">Password</label>
      <input id="password" type="password" name="password" [(ngModel)]="loginForm.password" placeholder="Enter password" required>

      <button type="submit">Login & Open Project</button>
      <small>{{ credentialsHint }}</small>
      <p *ngIf="loginError" class="error">{{ loginError }}</p>
    </form>
  </div>
</div>

<ng-template #dashboardView>
  <div class="ams-app dashboard">
    <header class="topbar">
      <div>
        <h2>ðŸ“Š Asset Management Dashboard</h2>
        <p>Concept UI with dummy data for IT, Non-IT, and Digital assets.</p>
      </div>
      <button (click)="onLogout()">Logout</button>
    </header>

    <section class="metrics-grid">
      <article>
        <h3>Total Assets</h3>
        <p>{{ totalAssets }}</p>
      </article>
      <article>
        <h3>Assigned Assets</h3>
        <p>{{ assignedAssets }}</p>
      </article>
      <article>
        <h3>In Repair</h3>
        <p>{{ repairAssets }}</p>
      </article>
      <article>
        <h3>Warranty Alerts</h3>
        <p>{{ expiringWarranty }}</p>
      </article>
    </section>

    <section class="module-grid">
      <article class="module-card">
        <h3>Asset Master Module</h3>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Type</th>
              <th>Status</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let asset of assets">
              <td>{{ asset.id }}</td>
              <td>{{ asset.name }}</td>
              <td>{{ asset.category }} / {{ asset.type }}</td>
              <td>{{ asset.status }}</td>
              <td>â‚¹{{ asset.value | number }}</td>
            </tr>
          </tbody>
        </table>
      </article>

      <article class="module-card">
        <h3>Employee Allocation Module</h3>
        <ul>
          <li *ngFor="let allocation of allocations">
            <strong>{{ allocation.assetId }}</strong> assigned to {{ allocation.employee }}
            (Issued: {{ allocation.issueDate }}, Return: {{ allocation.returnDate }}) â€”
            {{ allocation.condition }} / {{ allocation.damageStatus }}
          </li>
        </ul>
      </article>

      <article class="module-card">
        <h3>Asset Tracking Module</h3>
        <ul>
          <li *ngFor="let asset of assets">
            {{ asset.id }} â€¢ {{ asset.location }} â€¢ {{ asset.status }}
          </li>
        </ul>
      </article>

      <article class="module-card">
        <h3>Maintenance Module</h3>
        <ul>
          <li *ngFor="let item of maintenance">
            {{ item.assetId }} â€” {{ item.serviceDate }} â€” {{ item.amc }} â€” â‚¹{{ item.repairCost | number }}
            <div class="muted">{{ item.note }}</div>
          </li>
        </ul>
      </article>
    </section>
  </div>
</ng-template>
